parameters:
  - name: json
    type: object

stages:
  - stage: deploy
    jobs:
      - ${{ each deployment in parameters.json }}:
          - deployment: deploy_${{ deployment.name }}
            displayName: Deploy ${{ upper(deployment.name) }}
            environment: data
            workspace:
              clean: all
            strategy:
              runOnce:
                deploy:
                  steps:
                    - bash: |
                        echo "name ${{ deployment.name }}"
                        echo "path ${{ deployment.path }}"